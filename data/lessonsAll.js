const lessonsAll = {
  "PSAffirmative": {
    "head": {},
    "key": "PSAffirmative",
    "title": "Простое настоящее время (утвердительные предложения)",
    "unit": "Presetn simple tense - простое настоящее время, утвердительная форма.",
    "intro": "… По статистике, 300-400 самых употребительных слов охватывают 90% лексики, используемой в разговорной речи. Свобода в общении возникает не от знания огромного количества слов, а от умения составлять даже из небольшого числа элементов большое количество комбинаций...",
    "rule": "Утвердительные предложения в английском языке строятся по прямому порядку слов: подлежащее + глагол. Подлежащим может быть местоимение или сущетвительное.",
    "wordsNew": {
      "pronouns": [
        {"en": "I", "ru": "я"},
        {"en": "you", "ru": "ты"},
        {"en": "we", "ru": "мы"},
        {"en": "they", "ru": "они"},
      ],
      "verbs": [
        {"en": "advise", "ru": "советовать"},
        {"en": "answer", "ru": "отвечать"},
        {"en": "ask", "ru": "спрашивать"},
        {"en": "believe", "ru": "верить"},
        {"en": "call", "ru": "звонить"},
        {"en": "change", "ru": "менять"},
        {"en": "close", "ru": "закрывать"},
        {"en": "copy", "ru": "копировать"},
        {"en": "excuse", "ru": "извинять"},
        {"en": "finish", "ru": "заканчивать"},
        {"en": "follow", "ru": "следовать"},
        {"en": "help", "ru": "помогать"},
        {"en": "hope", "ru": "надеяться"},
        {"en": "like", "ru": "нравиться"},
        {"en": "listen", "ru": "слушать"},
        {"en": "live", "ru": "жить"},
        {"en": "look", "ru": "смотреть"},
        {"en": "love", "ru": "любить"},
        {"en": "move", "ru": "двигать"},
        {"en": "need", "ru": "нуждаться"},
        {"en": "open", "ru": "открывать"},
        {"en": "order", "ru": "заказывать"},
        {"en": "play", "ru": "играть"},
        {"en": "remember", "ru": "помнить"},
        {"en": "start", "ru": "начинать"},
        {"en": "stay", "ru": "остановиться"},
        {"en": "stop", "ru": "останавливаться"},
        {"en": "study", "ru": "изучать"},
        {"en": "thank", "ru": "благодарить"},
        {"en": "travel", "ru": "путешествовать"},
        {"en": "try", "ru": "пытаться"},
        {"en": "use", "ru": "использовать"},
        {"en": "wait", "ru": "ждать"},
        {"en": "walk", "ru": "ходить"},
        {"en": "want", "ru": "хотеть"},
        {"en": "work", "ru": "работать"},
        {"en": "worry", "ru": "беспокоиться"},
        ]
      },
    "exercises": [
      {"difficulty": "orderly", "construction": ["pronoun", "verb", "."], "lang": "en"},
      {"difficulty": "orderly", "construction": ["pronoun", "verb", "."], "lang": "ru"},
      {"difficulty": "mixed", "construction": ["pronoun", "verb", "."], "lang": "en"},
      {"difficulty": "mixed", "construction": ["pronoun", "verb", "."], "lang": "ru"},
      {"difficulty": "all", "construction": ["pronoun", "verb", "."], "lang": "ru-en"},
    ],
    "dolu": "2017-11-02 03:31:42.292099"
  },
  "PSNegative": {
    "head": {},
    "key": "PSNegative",
    "title": "Простое настоящее время (отрицательные предложения)",
    "unit": "Presetn simple tense - простое настоящее время, отричательня форма.",
    "intro": "… По статистике, 300-400 самых употребительных слов охватывают 90% лексики, используемой в разговорной речи. Свобода в общении возникает не от знания огромного количества слов, а от умения составлять даже из небольшого числа элементов большое количество комбинаций...",
    "rule": "Отрицательные предложения в английском языке строятся по прямому порядку слов с использованием вспомогательного глагола - do и частички отрицания - not: подлежащее + do not + глагол. Подлежащим может быть местоимение или сущетвительное.",
    "wordsNew": {
      "pronouns": [
        {"en": "I", "ru": "я"},
        {"en": "you", "ru": "ты"},
        {"en": "we", "ru": "мы"},
        {"en": "they", "ru": "они"},
      ],
      "verbs": [
        {"en": "advise", "ru": "советовать"},
        {"en": "answer", "ru": "отвечать"},
        {"en": "ask", "ru": "спрашивать"},
        {"en": "believe", "ru": "верить"},
        {"en": "call", "ru": "звонить"},
        {"en": "change", "ru": "менять"},
        {"en": "close", "ru": "закрывать"},
        {"en": "copy", "ru": "копировать"},
        {"en": "excuse", "ru": "извинять"},
        {"en": "finish", "ru": "заканчивать"},
        {"en": "follow", "ru": "следовать"},
        {"en": "help", "ru": "помогать"},
        {"en": "hope", "ru": "надеяться"},
        {"en": "like", "ru": "нравиться"},
        {"en": "listen", "ru": "слушать"},
        {"en": "live", "ru": "жить"},
        {"en": "look", "ru": "смотреть"},
        {"en": "love", "ru": "любить"},
        {"en": "move", "ru": "двигать"},
        {"en": "need", "ru": "нуждаться"},
        {"en": "open", "ru": "открывать"},
        {"en": "order", "ru": "заказывать"},
        {"en": "play", "ru": "играть"},
        {"en": "remember", "ru": "помнить"},
        {"en": "start", "ru": "начинать"},
        {"en": "stay", "ru": "остановиться"},
        {"en": "stop", "ru": "останавливаться"},
        {"en": "study", "ru": "изучать"},
        {"en": "thank", "ru": "благодарить"},
        {"en": "travel", "ru": "путешествовать"},
        {"en": "try", "ru": "пытаться"},
        {"en": "use", "ru": "использовать"},
        {"en": "wait", "ru": "ждать"},
        {"en": "walk", "ru": "ходить"},
        {"en": "want", "ru": "хотеть"},
        {"en": "work", "ru": "работать"},
        {"en": "worry", "ru": "беспокоиться"},
        ]
      },
    "exercises": [
      {"difficulty": "orderly", "construction": ["pronoun", " do not", "verb", "."], "lang": "en"},
      {"difficulty": "orderly", "construction": ["pronoun", " не", "verb", "."], "lang": "ru"},
      {"difficulty": "mixed", "construction": ["pronoun", " do not", "verb", "."], "lang": "en"},
      {"difficulty": "mixed", "construction": ["pronoun", " не", "verb", "."], "lang": "ru"},
      {"difficulty": "all", "construction": ["pronoun", " do not", "verb", "."], "lang": "ru-en"},
    ],
    "dolu": "2017-11-02 03:31:42.292099"
  },
  "PSQestionGeneral": {
    "head": {},
    "key": "PSQestionGeneral",
    "title": "Простое настоящее время (общий вопрос: да/нет)",
    "unit": "Presetn simple tense - простое настоящее время, общий вопрос.",
    "intro": "… По статистике, 300-400 самых употребительных слов охватывают 90% лексики, используемой в разговорной речи. Свобода в общении возникает не от знания огромного количества слов, а от умения составлять даже из небольшого числа элементов большое количество комбинаций...",
    "rule": "Для образования вопросительной формы от всех глаголов в настоящем простом времени используется вспомогательный глагол (он не переводтиться) - do: Do + подлежащее + глагол. Подлежащим может быть местоимение или сущетвительное.",
    "wordsNew": {
      "pronouns": [
        {"en": "I", "ru": "я"},
        {"en": "you", "ru": "ты"},
        {"en": "we", "ru": "мы"},
        {"en": "they", "ru": "они"},
      ],
      "verbs": [
        {"en": "advise", "ru": "советовать"},
        {"en": "answer", "ru": "отвечать"},
        {"en": "ask", "ru": "спрашивать"},
        {"en": "believe", "ru": "верить"},
        {"en": "call", "ru": "звонить"},
        {"en": "change", "ru": "менять"},
        {"en": "close", "ru": "закрывать"},
        {"en": "copy", "ru": "копировать"},
        {"en": "excuse", "ru": "извинять"},
        {"en": "finish", "ru": "заканчивать"},
        {"en": "follow", "ru": "следовать"},
        {"en": "help", "ru": "помогать"},
        {"en": "hope", "ru": "надеяться"},
        {"en": "like", "ru": "нравиться"},
        {"en": "listen", "ru": "слушать"},
        {"en": "live", "ru": "жить"},
        {"en": "look", "ru": "смотреть"},
        {"en": "love", "ru": "любить"},
        {"en": "move", "ru": "двигать"},
        {"en": "need", "ru": "нуждаться"},
        {"en": "open", "ru": "открывать"},
        {"en": "order", "ru": "заказывать"},
        {"en": "play", "ru": "играть"},
        {"en": "remember", "ru": "помнить"},
        {"en": "start", "ru": "начинать"},
        {"en": "stay", "ru": "остановиться"},
        {"en": "stop", "ru": "останавливаться"},
        {"en": "study", "ru": "изучать"},
        {"en": "thank", "ru": "благодарить"},
        {"en": "travel", "ru": "путешествовать"},
        {"en": "try", "ru": "пытаться"},
        {"en": "use", "ru": "использовать"},
        {"en": "wait", "ru": "ждать"},
        {"en": "walk", "ru": "ходить"},
        {"en": "want", "ru": "хотеть"},
        {"en": "work", "ru": "работать"},
        {"en": "worry", "ru": "беспокоиться"},
        ]
      },
    "exercises": [
      {"difficulty": "orderly", "construction": ["Do", "pronoun", "verb", "?"], "lang": "en"},
      {"difficulty": "orderly", "construction": ["pronoun", "verb", "?"], "lang": "ru"},
      {"difficulty": "mixed", "construction": ["Do", "pronoun", "verb", "?"], "lang": "en"},
      {"difficulty": "mixed", "construction": ["pronoun", "verb", "?"], "lang": "ru"},
      {"difficulty": "all", "construction": ["Do", "pronoun", "verb", "?"], "lang": "ru-en"},
    ],
    "dolu": "2017-11-02 03:31:42.292099"
  },
  "FSAffirmative": {
    "head": {},
    "key": "FSAffirmative",
    "title": "Простое будущщее время (утвердительные предложения)",
    "unit": "Future simple tense - простое будущщее время, утвердительная форма.",
    "intro": "… По статистике, 300-400 самых употребительных слов охватывают 90% лексики, используемой в разговорной речи. Свобода в общении возникает не от знания огромного количества слов, а от умения составлять даже из небольшого числа элементов большое количество комбинаций...",
    "rule": "Утвердительные предложения будущего времени в английском языке строятся по прямому порядку слов, с добавлением вспомогательного глагола - will (он не переводтиться): подлежащее + will + глагол. Подлежащим может быть местоимение или сущетвительное.",
    "wordsNew": {
      "pronouns": [
        {"en": "I", "ru": "я"},
        {"en": "you", "ru": "ты"},
        {"en": "we", "ru": "мы"},
        {"en": "they", "ru": "они"},
      ],
      "verbs": [
        {"en": "advise", "ru": "советовать"},
        {"en": "answer", "ru": "отвечать"},
        {"en": "ask", "ru": "спрашивать"},
        {"en": "believe", "ru": "верить"},
        {"en": "call", "ru": "звонить"},
        {"en": "change", "ru": "менять"},
        {"en": "close", "ru": "закрывать"},
        {"en": "copy", "ru": "копировать"},
        {"en": "excuse", "ru": "извинять"},
        {"en": "finish", "ru": "заканчивать"},
        {"en": "follow", "ru": "следовать"},
        {"en": "help", "ru": "помогать"},
        {"en": "hope", "ru": "надеяться"},
        {"en": "like", "ru": "нравиться"},
        {"en": "listen", "ru": "слушать"},
        {"en": "live", "ru": "жить"},
        {"en": "look", "ru": "смотреть"},
        {"en": "love", "ru": "любить"},
        {"en": "move", "ru": "двигать"},
        {"en": "need", "ru": "нуждаться"},
        {"en": "open", "ru": "открывать"},
        {"en": "order", "ru": "заказывать"},
        {"en": "play", "ru": "играть"},
        {"en": "remember", "ru": "помнить"},
        {"en": "start", "ru": "начинать"},
        {"en": "stay", "ru": "остановиться"},
        {"en": "stop", "ru": "останавливаться"},
        {"en": "study", "ru": "изучать"},
        {"en": "thank", "ru": "благодарить"},
        {"en": "travel", "ru": "путешествовать"},
        {"en": "try", "ru": "пытаться"},
        {"en": "use", "ru": "использовать"},
        {"en": "wait", "ru": "ждать"},
        {"en": "walk", "ru": "ходить"},
        {"en": "want", "ru": "хотеть"},
        {"en": "work", "ru": "работать"},
        {"en": "worry", "ru": "беспокоиться"},
        ]
      },
    "exercises": [
      {"difficulty": "orderly", "construction": ["pronoun", " will", "verb", "."], "lang": "en"},
      {"difficulty": "orderly", "construction": ["pronoun", " буду", "verb", "."], "lang": "ru"},
      {"difficulty": "mixed", "construction": ["pronoun", " will", "verb", "."], "lang": "en"},
      {"difficulty": "mixed", "construction": ["pronoun", " буду", "verb", "."], "lang": "ru"},
      {"difficulty": "all", "construction": ["pronoun", " will", "verb", "."], "lang": "ru-en"},
    ],
    "dolu": "2017-11-02 03:31:42.292099"
  },
  "FSNegative": {
    "head": {},
    "key": "FSNegative",
    "title": "Простое будущее время (отрицательные предложения)",
    "unit": "Future simple tense - простое настоящее время, отричательня форма.",
    "intro": "… По статистике, 300-400 самых употребительных слов охватывают 90% лексики, используемой в разговорной речи. Свобода в общении возникает не от знания огромного количества слов, а от умения составлять даже из небольшого числа элементов большое количество комбинаций...",
    "rule": "Отрицательные предложения будущего времени в английском языке строятся по прямому порядку слов с использованием вспомогательного глагола - will (он не переводтиться) и частички отрицания - not: подлежащее + will not + глагол. Подлежащим может быть местоимение или сущетвительное.",
    "wordsNew": {
      "pronouns": [
        {"en": "I", "ru": "я"},
        {"en": "you", "ru": "ты"},
        {"en": "we", "ru": "мы"},
        {"en": "they", "ru": "они"},
      ],
      "verbs": [
        {"en": "advise", "ru": "советовать"},
        {"en": "answer", "ru": "отвечать"},
        {"en": "ask", "ru": "спрашивать"},
        {"en": "believe", "ru": "верить"},
        {"en": "call", "ru": "звонить"},
        {"en": "change", "ru": "менять"},
        {"en": "close", "ru": "закрывать"},
        {"en": "copy", "ru": "копировать"},
        {"en": "excuse", "ru": "извинять"},
        {"en": "finish", "ru": "заканчивать"},
        {"en": "follow", "ru": "следовать"},
        {"en": "help", "ru": "помогать"},
        {"en": "hope", "ru": "надеяться"},
        {"en": "like", "ru": "нравиться"},
        {"en": "listen", "ru": "слушать"},
        {"en": "live", "ru": "жить"},
        {"en": "look", "ru": "смотреть"},
        {"en": "love", "ru": "любить"},
        {"en": "move", "ru": "двигать"},
        {"en": "need", "ru": "нуждаться"},
        {"en": "open", "ru": "открывать"},
        {"en": "order", "ru": "заказывать"},
        {"en": "play", "ru": "играть"},
        {"en": "remember", "ru": "помнить"},
        {"en": "start", "ru": "начинать"},
        {"en": "stay", "ru": "остановиться"},
        {"en": "stop", "ru": "останавливаться"},
        {"en": "study", "ru": "изучать"},
        {"en": "thank", "ru": "благодарить"},
        {"en": "travel", "ru": "путешествовать"},
        {"en": "try", "ru": "пытаться"},
        {"en": "use", "ru": "использовать"},
        {"en": "wait", "ru": "ждать"},
        {"en": "walk", "ru": "ходить"},
        {"en": "want", "ru": "хотеть"},
        {"en": "work", "ru": "работать"},
        {"en": "worry", "ru": "беспокоиться"},
        ]
      },
    "exercises": [
      {"difficulty": "orderly", "construction": ["pronoun", " will not", "verb", "."], "lang": "en"},
      {"difficulty": "orderly", "construction": ["pronoun", " не буду", "verb", "."], "lang": "ru"},
      {"difficulty": "mixed", "construction": ["pronoun", " will not", "verb", "."], "lang": "en"},
      {"difficulty": "mixed", "construction": ["pronoun", " не буду", "verb", "."], "lang": "ru"},
      {"difficulty": "all", "construction": ["pronoun", " will not", "verb", "."], "lang": "ru-en"},
    ],
    "dolu": "2017-11-02 03:31:42.292099"
  },
  "FSQestionGeneral": {
    "head": {},
    "key": "FSQestionGeneral",
    "title": "Простое будущее время (общий вопрос: да/нет)",
    "unit": "Future simple tense - простое настоящее время, общий вопрос.",
    "intro": "… По статистике, 300-400 самых употребительных слов охватывают 90% лексики, используемой в разговорной речи. Свобода в общении возникает не от знания огромного количества слов, а от умения составлять даже из небольшого числа элементов большое количество комбинаций...",
    "rule": "Для образования вопросительной формы от всех глаголов в будущем простом времени используется вспомогательный глагол (он не переводтиться) - will: Will + подлежащее + глагол. Подлежащим может быть местоимение или сущетвительное.",
    "wordsNew": {
      "pronouns": [
        {"en": "I", "ru": "я"},
        {"en": "you", "ru": "ты"},
        {"en": "we", "ru": "мы"},
        {"en": "they", "ru": "они"},
      ],
      "verbs": [
        {"en": "advise", "ru": "советовать"},
        {"en": "answer", "ru": "отвечать"},
        {"en": "ask", "ru": "спрашивать"},
        {"en": "believe", "ru": "верить"},
        {"en": "call", "ru": "звонить"},
        {"en": "change", "ru": "менять"},
        {"en": "close", "ru": "закрывать"},
        {"en": "copy", "ru": "копировать"},
        {"en": "excuse", "ru": "извинять"},
        {"en": "finish", "ru": "заканчивать"},
        {"en": "follow", "ru": "следовать"},
        {"en": "help", "ru": "помогать"},
        {"en": "hope", "ru": "надеяться"},
        {"en": "like", "ru": "нравиться"},
        {"en": "listen", "ru": "слушать"},
        {"en": "live", "ru": "жить"},
        {"en": "look", "ru": "смотреть"},
        {"en": "love", "ru": "любить"},
        {"en": "move", "ru": "двигать"},
        {"en": "need", "ru": "нуждаться"},
        {"en": "open", "ru": "открывать"},
        {"en": "order", "ru": "заказывать"},
        {"en": "play", "ru": "играть"},
        {"en": "remember", "ru": "помнить"},
        {"en": "start", "ru": "начинать"},
        {"en": "stay", "ru": "остановиться"},
        {"en": "stop", "ru": "останавливаться"},
        {"en": "study", "ru": "изучать"},
        {"en": "thank", "ru": "благодарить"},
        {"en": "travel", "ru": "путешествовать"},
        {"en": "try", "ru": "пытаться"},
        {"en": "use", "ru": "использовать"},
        {"en": "wait", "ru": "ждать"},
        {"en": "walk", "ru": "ходить"},
        {"en": "want", "ru": "хотеть"},
        {"en": "work", "ru": "работать"},
        {"en": "worry", "ru": "беспокоиться"},
        ]
      },
    "exercises": [
      {"difficulty": "orderly", "construction": ["Will", "pronoun", "verb", "?"], "lang": "en"},
      {"difficulty": "orderly", "construction": ["Будешь", "pronoun", "verb", "?"], "lang": "ru"},
      {"difficulty": "mixed", "construction": ["Will", "pronoun", "verb", "?"], "lang": "en"},
      {"difficulty": "mixed", "construction": ["Будешь", "pronoun", "verb", "?"], "lang": "ru"},
      {"difficulty": "all", "construction": ["Will", "pronoun", "verb", "?"], "lang": "ru-en"},
    ],
    "dolu": "2017-11-02 03:31:42.292099"
  },
};

// console.log(lessonsAll.PSAffirmative.wordsNew);
// Object.values(lessonsAll).forEach(lesson => console.log(lesson));
// let key = "PSQestionGeneral";
// console.log(key in lessonsAll);
// console.log("PSQestionGeneral" in lessonsAll);

function upFirstCaseSentence(str) {
    return str.replace(/.+?[\.\?\!](\s|$)/g, function (txt) {
        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
    });
}

function getSentencesGen(construction, words, lang){
  let newSentence, sentences = [];
  words.verbs.forEach(verb => {
    words.pronouns.forEach(pronoun => {
      newSentence = "";
      construction.forEach(el => {
        switch (el) {
          case "pronoun":
            newSentence += ` ${pronoun[lang]}`;
            break;
          case "verb":
            newSentence += ` ${verb[lang]}`;
            break;
          case "PSQestionGeneral":

            break;
          default:
          newSentence += el;
        }
      });
      newSentence = newSentence.slice(0, 1)==" " ? newSentence.slice(1): newSentence; //cut first space
      sentences.push(upFirstCaseSentence(newSentence));
    })
  });
  return sentences;
}

function getSentencesOrderly(sentences, numb){
  let sentencesGroup = [];
  const step = sentences.length/numb
  for (let i = 0; i < sentences.length; i += step){
    sentencesGroup.push(sentences.slice(i, i + step).join(" "));
  }
  return sentencesGroup;
}

function getSentencesMixed(sentences, numb){
  let sentencesGroup = [];
  sentences.sort(function(a,b) {return Math.random() - 0.5;}); // mix values in array
  const step = sentences.length/numb
  for (let i = 0; i < sentences.length; i += step){
    sentencesGroup.push(sentences.slice(i, i + step).join(" "));
  }
  return sentencesGroup;
}

function getExercisesGen(exercise, words){
  let sentencesGen = [];
  exercise.lang.split("-").forEach(lang => sentencesGen = [].concat(sentencesGen, getSentencesGen(exercise.construction, words, lang)));
  if (exercise.difficulty === "orderly") {
    return getSentencesOrderly(sentencesGen, words.verbs.length);
  } else if (exercise.difficulty === "mixed") {
    return getSentencesMixed(sentencesGen, words.verbs.length);
  }
}

function getExercisesAll(nameLesson){
  let exercisesAll = [];
  nameLesson.exercises.forEach(exercise => exercisesAll.push(getExercisesGen(exercise, nameLesson.wordsNew)));
  return exercisesAll;
}

// console.log(lessonsAll.PSAffirmative.exercises[0].construction,
//               lessonsAll.PSAffirmative.wordsNew,
//                 lessonsAll.PSAffirmative.exercises[0].lang);
// console.log(getSentencesGen(lessonsAll.PSAffirmative.exercises[0].construction,
//               lessonsAll.PSAffirmative.wordsNew,
//                 lessonsAll.PSAffirmative.exercises[0].lang));
// console.log(getSentencesOrderly(getSentencesGen(lessonsAll.PSAffirmative.exercises[0].construction,
//               lessonsAll.PSAffirmative.wordsNew,
//                 lessonsAll.PSAffirmative.exercises[0].lang),
//               lessonsAll.PSAffirmative.wordsNew.verbs.length));
// console.log(getGenExercises(lessonsAll.PSAffirmative.exercises[0], lessonsAll.PSAffirmative.wordsNew));
// console.log(getGenExercises(lessonsAll.PSAffirmative.exercises[3], lessonsAll.PSAffirmative.wordsNew));

// Object.keys(lessonsAll).forEach(nameLesson => console.log(nameLesson));
// Object.keys(lessonsAll).forEach(nameLesson => console.log(lessonsAll[nameLesson]));
Object.keys(lessonsAll).forEach(nameLesson =>
  getExercisesAll(lessonsAll[nameLesson]).forEach(el => console.log(el)));
